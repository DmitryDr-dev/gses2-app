# GSES2 BTC application

## Вимоги

### Основні вимоги

Сервіс повинен дозволити:

- дізнатись поточний курс біткоіну (BTC) у гривні (UAH)
- підписати емейл на отримання інформації по зміні курсу
- запит, який відправить всім підписаним користувачам актуальний курс

### Додаткові вимоги

- Сервіс повинен відповідати поданому [API](https://github.com/AndriiPopovych/gses/blob/main/gses2swagger.yaml)
- У якості бази даних необхідно використовувати файлову систему
- В репозиторії повинен бути Dockerfile, який дозволяє запустити систему в Docker

## Опис додатку

Для виконання даного завдання фреймворку було обрано поєднання Nest.js + TypeScript. З метою поліпшення підтримки та розробки додатку я спробував детально продумати його архітектуру. У побудові архітектури я керувався принципами SOLID та DRY. Переді мною стояла мета створити незалежні сервіси, які можна було б максимально легко розширювати та використовувати повторно.

Насамперед, я виділив для себе наступні складові майбутнього додатку:

1. Основні Модулі

- **Rate** - модуль для отримання поточного курсу валют
- **Subscription** - модуль, що дозволяє додати email користувача до бази даних (далі БД) та зробити масове розсилання за запитом

2. Допоміжні модулі

- **Exception Filter** - цей модуль відповідає за кастомне оброблення exceptions та відправки відповіді користувачу
- **Validation Pipe** - цей модуль відповідає за перевірку вхідних даних відповідно до заданого DTO (Data Transfer Object)

3. Модуль бази даних

- **Local Database**
- **Database Binary Tree**
- **Database Storage**

4. Додаткові модулі

- **API Module** - для отримання інформації про курс валют з third party сервісу
- **Mail Module** - для розсилання email за заданим шаблоном

Нижче я б хотів детальніше зупинитись на деяких рішеннях при створенні цього веб-додатку

## Основні модулі

Кожен з основних модулів побудований за принципом:

`Incoming Data -> Validation -> Controller <-> Service <-> Other Services`

- _Incoming Data_ - потік вхідних даних
- _Validation Pipe_ - pipe для валідації вхідних даних згідно з нашим DTO. На прикладі нашого додатку ми валідуємо вхідний email на предмет правильного формату та типу даних. Для валідації використовуються бібліотеки _class-validator_ та _class-transformer_
- _Controller_ - використовується для оброблення запитів та передачі для подальшої обробки сервісам. Після отримання даних від сервісу робить відповідь клієнту: у разі успіху `HttpStatus.OK` або відправляє `exception`
- _Service_ - сервіс, що займється обробкою бізнес- логіки та взаємодією з іншими
